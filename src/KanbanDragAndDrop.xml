<?xml version="1.0" encoding="utf-8" ?>
<widget
    id="kobeon.kanbandraganddrop.KanbanDragAndDrop"
    pluginWidget="true"
    needsEntityContext="true"
    offlineCapable="true"
    supportedPlatform="Web"
    xmlns="http://www.mendix.com/widget/1.0/"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.mendix.com/widget/1.0/ ../node_modules/mendix/custom_widget.xsd"
>
    <name>Kanban Drag And Drop</name>
    <description>Drag cards between lanes with templated lane/card content.</description>
    <icon />
    <properties>
        <propertyGroup caption="Data">
            <propertyGroup caption="Lanes">
                <property key="lanes" type="datasource" isList="true" required="true">
                    <caption>Lane data</caption>
                    <description>Datasource returning Lane objects.</description>
                </property>
                <property key="laneSortKeyAttr" type="attribute" dataSource="lanes" required="true">
                    <caption>Lane sort key</caption>
                    <description>Determines lane order.</description>
                    <attributeTypes>
                        <attributeType name="Decimal" />
                    </attributeTypes>
                </property>
                <property key="laneGuidAttr" type="attribute" dataSource="lanes" required="true">
                    <caption>Lane identifier</caption>
                    <description>Unique lane id (passed to on drop flow).</description>
                    <attributeTypes>
                        <attributeType name="String" />
                        <attributeType name="AutoNumber" />
                        <attributeType name="Integer" />
                        <attributeType name="Long" />
                    </attributeTypes>
                </property>
            </propertyGroup>
            <propertyGroup caption="Cards">
                <property key="cards" type="datasource" isList="true" required="true">
                    <caption>Car data</caption>
                    <description>Datasource returning Card objects.</description>
                </property>

                <property key="cardSortKeyAttr" type="attribute" dataSource="cards" required="true">
                    <caption>Card sort key</caption>
                    <description>Order within a lane.</description>
                    <attributeTypes>
                        <attributeType name="Decimal" />
                    </attributeTypes>
                </property>
                <property
                    key="cardLaneRef"
                    type="association"
                    dataSource="cards"
                    required="true"
                    selectableObjects="lanes"
                >
                    <caption>Card → Lane</caption>
                    <description>Reference from Card to Lane.</description>
                    <associationTypes>
                        <associationType name="Reference" />
                    </associationTypes>
                </property>
            </propertyGroup>
        </propertyGroup>
        <propertyGroup caption="On drop">
            <property key="moveTargetLaneGuid" type="attribute" required="true">
                <caption>Target lane id</caption>
                <description>Attribute to receive the target lane identifier.</description>
                <attributeTypes>
                    <attributeType name="String" />
                    <attributeType name="Integer" />
                    <attributeType name="Long" />
                </attributeTypes>
            </property>
            <property key="moveNewSortKey" type="attribute" required="true">
                <caption>New sort key</caption>
                <description>Attribute (decimal) to receive the new sort key for the card.
                </description>
                <attributeTypes>
                    <attributeType name="Decimal" />
                </attributeTypes>
            </property>
            <property key="onDrop" type="action" dataSource="cards" required="true">
                <caption>On drop action</caption>
                <description>Select microflow to update the Card SortKey and the Card→Lane association.</description>
            </property>
        </propertyGroup>
        <propertyGroup caption="Templates">
            <property key="laneContent" type="widgets" dataSource="lanes">
                <caption>Lane header (Lane)</caption>
                <description>Widgets rendered in each lane header (Lane context).</description>
            </property>
            <property key="cardContent" type="widgets" dataSource="cards">
                <caption>Card body (Card)</caption>
                <description>Widgets rendered inside each card (Card context).</description>
            </property>
        </propertyGroup>
        <propertyGroup caption="Layout">
            <property key="laneWidth" type="expression" defaultValue="300px">
                <caption>Lane width (CSS)</caption>
                <description>Width of each lane. Accepts CSS values like "500px", "40%"
                </description>
                <returnType type="String" />
            </property>
                <property key="enableLaneBottomSheet" type="boolean" defaultValue="false">
                    <caption>Enable footer</caption>
                    <description>Show a custom section at the bottom of each lane.</description>
                </property>
                <property key="enableLaneEmptySheet" type="boolean" defaultValue="false">
                    <caption>Enable empty section</caption>
                    <description>Show a custom section when there are no cards in the lane.</description>
                </property>
            <property key="laneEmptySheet" type="widgets" dataSource="lanes">
                <caption>Empty sheet content (Lane)</caption>
                <description>Section to place custom content when lane is empty.</description>
            </property>
            <property key="laneBottomSheet" type="widgets" dataSource="lanes">
                <caption>Bottom sheet content</caption>
                <description>Section to place custom content for the bottom of each lane.</description>
            </property>
        </propertyGroup>
    </properties>
</widget>
